$(document).ready(function(){function i(i,t,e,n,a){this.pushID=i,this.uid=t,this.name=e,this.link=n,this.description=a,this.save=function(){s.push({uid:this.uid,name:this.name,link:this.link,description:this.description})},this.addToUI=function(){$("#bookmarks-list").append('<div class="list-group-item"> 											<h4 class="list-group-item-heading" style="text-align:left"><a href="'+this.link+'"">'+this.name+'</a> 									    		<span style="float:right" class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span> </h4> 									    	<p class="list-group-item-text">'+this.link+'</p> 									    	<div class="bm-desc"> 									    		<hr/> 									    		<span style="float:right;padding-left:10px;" class="glyphicon glyphicon-pencil edit-bookmark" aria-hidden="true"></span> 									    		<span style="float:right;padding-left:10px;" class="glyphicon glyphicon-trash delete-bookmark" aria-hidden="true"></span> 									    		<p class="desc">'+this.description+"</p> 									    	</div> 									  	</div>")},this.getUID=function(){return this.uid},this.deleteBM=function(){s.child(this.pushID).remove()},this.update=function(i,t,e){var n=s.child(this.pushID);n.update({name:i,link:t,description:e})}}function t(i,t){for(var e in d)if(d[e].name===t&&d[e].uid===i)return e}$("#navigation-list li").click(function(){$("#navigation-list li").removeClass("active"),$(this).addClass("active"),$(".inner-body").removeClass("active");var i=$(this).attr("id").length-6;$("#"+$(this).attr("id").substr(0,i)+"-body").addClass("active")}),$(".glyphicon-triangle-bottom").click(function(){$(".overlay-dropdown").toggle()});var e=new Firebase("https://bookmark-manager.firebaseio.com/"),n=e.getAuth();if(!n){var a="index.html";$(location).attr("href",a)}var o=e.child("users"),l=[];o.on("child_added",function(i){console.log(i.val()),$("#users-list").append('<li class="list-group-item" style="text-align:center">'+i.val().email+"</li>"),l.push(i.val()),i.val().uid===n.uid&&$("#contact-info > div > p > #useremail").append(i.val().email)},function(){alert("Failed to retrive Users' list")}),$("#users-list").on("mouseover","li",function(){});var s=e.child("bookmarks"),d=[];s.on("child_added",function(t){var e=t.val().name,a=t.val().link,o=t.val().description,l=new i(t.key(),n.uid,e,a,o);d.push(l),t.val().uid===n.uid&&l.addToUI()},function(){alert("Failed to retrive bookmarks list")}),$("#bookmarks-list").on("click",".list-group-item > h4 > .glyphicon-chevron-down",function(){$(this).parent().parent().find(".bm-desc").toggle()}),$("#add-bookmark").click(function(){var t=$("#new-bookmark-form #bm-name input").val(),e=$("#new-bookmark-form #bm-link input").val(),a=$("#new-bookmark-form #bm-description input").val(),o=new i("default",n.uid,t,e,a);o.save()}),$(document).on("click",".delete-bookmark",function(){var i=$(this).parent().parent(),e=i.find("h4").find("a").html(),a=t(n.uid,e);d[a].deleteBM(),$(this).parent().parent().remove(),d.splice(a,1)}),$("#bookmarks-list").on("click",".edit-bookmark",function(){$(".cd-user-modal").addClass("is-visible"),$(".overlay-back, .overlay").fadeIn(500);var i=$(this).parent().parent(),t=i.find("h4").find("a").html(),e=i.find("p").html(),n=i.find("div").find("p").html();$("#edit-bm-name input").val(t),$("#edit-bm-link input").val(e),$("#edit-bm-description input").val(n)}),$("#save-bookmark").click(function(){var i=$("#edit-bm-name input").val(),e=$("#edit-bm-link input").val(),a=$("#edit-bm-description input").val(),o=t(n.uid,i);d[o].update(i,e,a),$(".close-pop-up").trigger("click"),location.reload()}),$(".close-pop-up").click(function(){$(".overlay, .overlay-back").hide(),$(".cd-user-modal").removeClass("is-visible")}),$("#logoutbutton").click(function(){e.unauth(),alert("Logged out!");var i="index.html";$(location).attr("href",i)}),$("#profilebutton").click(function(){window.open("profile.html","","height=600, width=1000")})});